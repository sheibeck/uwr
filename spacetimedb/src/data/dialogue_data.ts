export interface DialogueOptionSeed {
  npcName: string;
  optionKey: string;
  parentOptionKey: string | null;
  playerText: string;  // Single keyword that triggers this
  npcResponse: string; // Can contain [keywords] for further conversation
  requiredAffinity: bigint;
  affinityChange: bigint;
  sortOrder: bigint;
  questTemplateName: string | null;  // Quest name instead of ID (looked up at runtime)
  affinityHint: string | null;
  isAffinityLocked: boolean;
}

export const NPC_DIALOGUE_OPTIONS: DialogueOptionSeed[] = [
  // === Marla the Guide ===
  // Root greeting - shows available [topics]
  {
    npcName: 'Marla the Guide',
    optionKey: 'marla_root',
    parentOptionKey: null,
    playerText: '',  // Root node, no keyword needed
    npcResponse: 'The [lands] beyond are harsh. I can help you understand the [dangers] or guide you on the best [paths].',
    requiredAffinity: 0n,
    affinityChange: 0n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },

  // First tier - available to strangers
  {
    npcName: 'Marla the Guide',
    optionKey: 'marla_lands',
    parentOptionKey: 'marla_root',
    playerText: 'lands',
    npcResponse: 'The lands beyond Hollowmere are unforgiving. Bog rats infest the wetlands, and worse things lurk deeper.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: 'Continue talking with me to earn my trust.',
    isAffinityLocked: false,
  },
  {
    npcName: 'Marla the Guide',
    optionKey: 'marla_dangers',
    parentOptionKey: 'marla_root',
    playerText: 'dangers',
    npcResponse: 'Bog rats are spreading disease in the wetlands. I need someone to thin their numbers. Can you help?',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 2n,
    questTemplateName: 'Bog Rat Cleanup',  // Offers quest by name
    affinityHint: 'Hunt bog rats to prove yourself.',
    isAffinityLocked: false,
  },
  {
    npcName: 'Marla the Guide',
    optionKey: 'marla_paths',
    parentOptionKey: 'marla_root',
    playerText: 'paths',
    npcResponse: 'Stick to the river paths if you value your skin. The Scorchlands will eat you alive unprepared.',
    requiredAffinity: 0n,
    affinityChange: 1n,
    sortOrder: 3n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },

  // Second tier - deeper conversation after affinity 25+
  {
    npcName: 'Marla the Guide',
    optionKey: 'marla_past',
    parentOptionKey: 'marla_root',
    playerText: 'past',
    npcResponse: '',  // Locked message shown instead
    requiredAffinity: 25n,
    affinityChange: 0n,
    sortOrder: 4n,
    questTemplateName: null,
    affinityHint: 'Complete my quest and we can talk more.',
    isAffinityLocked: true,
  },
  {
    npcName: 'Marla the Guide',
    optionKey: 'marla_past_unlocked',
    parentOptionKey: null,  // New root option when affinity reaches 25
    playerText: 'past',
    npcResponse: 'Lost my whole company to a bog wyrm three winters back. Only one who made it out. I learned the land better than it knows me.',
    requiredAffinity: 25n,
    affinityChange: 3n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },

  // Third tier - Friend level (50+)
  {
    npcName: 'Marla the Guide',
    optionKey: 'marla_shortcuts',
    parentOptionKey: null,
    playerText: 'shortcuts',
    npcResponse: 'There is an old smuggler trail through the Thornveil. Dangerous, but it cuts the journey in half.',
    requiredAffinity: 50n,
    affinityChange: 5n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },

  // === Elder Soren ===
  {
    npcName: 'Elder Soren',
    optionKey: 'soren_root',
    parentOptionKey: null,
    playerText: '',
    npcResponse: 'This town has stood since before the Ashfall. Ask me about [Hollowmere], the [factions], or the [history].',
    requiredAffinity: 0n,
    affinityChange: 0n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Elder Soren',
    optionKey: 'soren_hollowmere',
    parentOptionKey: 'soren_root',
    playerText: 'Hollowmere',
    npcResponse: 'We endure because we remember. Others forget and perish. The old ways keep us alive.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: 'Show respect by listening to my stories.',
    isAffinityLocked: false,
  },
  {
    npcName: 'Elder Soren',
    optionKey: 'soren_factions',
    parentOptionKey: 'soren_root',
    playerText: 'factions',
    npcResponse: 'Four powers carve this land. The Iron Compact trades in steel. The Verdant Circle guards the green. The Ashen Order hoards knowledge. The Free Blades sell their swords.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 2n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Elder Soren',
    optionKey: 'soren_history',
    parentOptionKey: 'soren_root',
    playerText: 'history',
    npcResponse: 'Green. Impossibly green. Rivers ran clear before the Ashfall. But that was before the Hollowed emerged.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 3n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },

  // === Quartermaster Jyn ===
  {
    npcName: 'Quartermaster Jyn',
    optionKey: 'jyn_root',
    parentOptionKey: null,
    playerText: '',
    npcResponse: 'Need [supplies]? I have blades, armor, rations. Or we can talk about the [caravans] if you are interested.',
    requiredAffinity: 0n,
    affinityChange: 0n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Quartermaster Jyn',
    optionKey: 'jyn_supplies',
    parentOptionKey: 'jyn_root',
    playerText: 'supplies',
    npcResponse: 'Standard issue. Nothing fancy, but it will keep you breathing. Right-click me to open the store.',
    requiredAffinity: 0n,
    affinityChange: 1n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: 'Buy from my store to support me.',
    isAffinityLocked: false,
  },
  {
    npcName: 'Quartermaster Jyn',
    optionKey: 'jyn_caravans',
    parentOptionKey: 'jyn_root',
    playerText: 'caravans',
    npcResponse: 'The southern caravans stopped running two weeks ago. Something on the road is hitting them hard. Maybe we can talk more about this later.',
    requiredAffinity: 0n,
    affinityChange: 1n,
    sortOrder: 2n,
    questTemplateName: null,
    affinityHint: 'Buy from my store and I will trust you with more information.',
    isAffinityLocked: true,
  },

  // === Warden Kael (Bramble Hollow) ===
  {
    npcName: 'Warden Kael',
    optionKey: 'kael_root',
    parentOptionKey: null,
    playerText: '',
    npcResponse: 'The [thickets] are dangerous. [Wolves] prowl at night. [Stalkers] hunt in the shadows.',
    requiredAffinity: 0n,
    affinityChange: 0n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Warden Kael',
    optionKey: 'kael_thickets',
    parentOptionKey: 'kael_root',
    playerText: 'thickets',
    npcResponse: 'Bramble Hollow is alive with thorns and teeth. Only the quick survive here.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: 'Help me clear the dangers to earn my trust.',
    isAffinityLocked: false,
  },
  {
    npcName: 'Warden Kael',
    optionKey: 'kael_wolves',
    parentOptionKey: 'kael_root',
    playerText: 'wolves',
    npcResponse: 'The wolf packs are spreading. Thin their numbers and I will make it worth your while.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 2n,
    questTemplateName: 'Wolf Pack Thinning',
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Warden Kael',
    optionKey: 'kael_stalkers',
    parentOptionKey: 'kael_root',
    playerText: 'stalkers',
    npcResponse: 'Blight Stalkers are the real threat. Hunt them down and you will have my respect.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 3n,
    questTemplateName: 'Stalker Hunt',
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Warden Kael',
    optionKey: 'kael_ranger',
    parentOptionKey: null,
    playerText: 'ranger',
    npcResponse: 'I was part of the Iron Watch before the Ashfall. Now I watch alone. The forest remembers who protects it.',
    requiredAffinity: 25n,
    affinityChange: 3n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },

  // === Herbalist Venna (Willowfen) ===
  {
    npcName: 'Herbalist Venna',
    optionKey: 'venna_root',
    parentOptionKey: null,
    playerText: '',
    npcResponse: 'I gather [herbs] from the [marsh]. The [croakers] make it difficult.',
    requiredAffinity: 0n,
    affinityChange: 0n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Herbalist Venna',
    optionKey: 'venna_herbs',
    parentOptionKey: 'venna_root',
    playerText: 'herbs',
    npcResponse: 'Willowfen grows rare fungi that ease pain and cure fever. Worth the risk.',
    requiredAffinity: 0n,
    affinityChange: 1n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: 'Help me with the marsh dangers.',
    isAffinityLocked: false,
  },
  {
    npcName: 'Herbalist Venna',
    optionKey: 'venna_marsh',
    parentOptionKey: 'venna_root',
    playerText: 'marsh',
    npcResponse: 'The swamp is alive. Not just the plants, but the water itself. It watches.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 2n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Herbalist Venna',
    optionKey: 'venna_croakers',
    parentOptionKey: 'venna_root',
    playerText: 'croakers',
    npcResponse: 'The marsh croakers have grown aggressive. Cull them and I can gather in peace.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 3n,
    questTemplateName: 'Croaker Culling',
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Herbalist Venna',
    optionKey: 'venna_circle',
    parentOptionKey: null,
    playerText: 'circle',
    npcResponse: 'The Verdant Circle preserves what the Ashfall tried to destroy. We remember the green.',
    requiredAffinity: 25n,
    affinityChange: 3n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },

  // === Old Moss (Lichen Ridge) ===
  {
    npcName: 'Old Moss',
    optionKey: 'moss_root',
    parentOptionKey: null,
    playerText: '',
    npcResponse: 'I watch the [ridge]. I watch what crawls [below]. I watch the [cairns].',
    requiredAffinity: 0n,
    affinityChange: 0n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Old Moss',
    optionKey: 'moss_ridge',
    parentOptionKey: 'moss_root',
    playerText: 'ridge',
    npcResponse: 'High ground is safe ground. Everything below wants to drag you down.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: 'Listen to my stories.',
    isAffinityLocked: false,
  },
  {
    npcName: 'Old Moss',
    optionKey: 'moss_below',
    parentOptionKey: 'moss_root',
    playerText: 'below',
    npcResponse: 'Rats. Wolves. Worse things. They all come from the swamp at night.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 2n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Old Moss',
    optionKey: 'moss_cairns',
    parentOptionKey: 'moss_root',
    playerText: 'cairns',
    npcResponse: 'Stones piled by the dead. Warnings. Markers. Graves. Who knows anymore.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 3n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Old Moss',
    optionKey: 'moss_secret',
    parentOptionKey: null,
    playerText: 'secret',
    npcResponse: 'The cairns are older than Hollowmere. Older than the Ashfall. They mark something buried deep.',
    requiredAffinity: 50n,
    affinityChange: 5n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },

  // === Forgemaster Dara (Slagstone Waystation) ===
  {
    npcName: 'Forgemaster Dara',
    optionKey: 'dara_root',
    parentOptionKey: null,
    playerText: '',
    npcResponse: 'The [forge] keeps burning. The [iron] keeps flowing. [Trade] keeps us alive.',
    requiredAffinity: 0n,
    affinityChange: 0n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Forgemaster Dara',
    optionKey: 'dara_forge',
    parentOptionKey: 'dara_root',
    playerText: 'forge',
    npcResponse: 'This waystation forge has kept travelers armed for decades. I intend to keep it that way.',
    requiredAffinity: 0n,
    affinityChange: 1n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: 'Support the Compact by buying from my store.',
    isAffinityLocked: false,
  },
  {
    npcName: 'Forgemaster Dara',
    optionKey: 'dara_iron',
    parentOptionKey: 'dara_root',
    playerText: 'iron',
    npcResponse: 'The Iron Compact controls the metal trade. We turn ore into order.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 2n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Forgemaster Dara',
    optionKey: 'dara_trade',
    parentOptionKey: 'dara_root',
    playerText: 'trade',
    npcResponse: 'Need gear? Right-click me. I stock what you need to survive the Fringe.',
    requiredAffinity: 0n,
    affinityChange: 1n,
    sortOrder: 3n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },

  // === Scout Thessa (Cinderwatch) ===
  {
    npcName: 'Scout Thessa',
    optionKey: 'thessa_root',
    parentOptionKey: null,
    playerText: '',
    npcResponse: 'I track [scouts] movements. [Jackals] prowl the dunes. [Sentinels] guard the ruins.',
    requiredAffinity: 0n,
    affinityChange: 0n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Scout Thessa',
    optionKey: 'thessa_scouts',
    parentOptionKey: 'thessa_root',
    playerText: 'scouts',
    npcResponse: 'The Free Blades send scouts to every corner. We watch. We report. We survive.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: 'Prove yourself in combat.',
    isAffinityLocked: false,
  },
  {
    npcName: 'Scout Thessa',
    optionKey: 'thessa_jackals',
    parentOptionKey: 'thessa_root',
    playerText: 'jackals',
    npcResponse: 'Ash Jackals hunt in packs across the Fringe. Thin their numbers for me.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 2n,
    questTemplateName: 'Jackal Purge',
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Scout Thessa',
    optionKey: 'thessa_sentinels',
    parentOptionKey: 'thessa_root',
    playerText: 'sentinels',
    npcResponse: 'The Cinder Sentinels are remnants of old wars. Dismantle them and clear the path.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 3n,
    questTemplateName: 'Sentinel Dismantling',
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Scout Thessa',
    optionKey: 'thessa_blades',
    parentOptionKey: null,
    playerText: 'blades',
    npcResponse: 'The Free Blades sell our swords to the highest bidder. We are loyal only to coin and contract.',
    requiredAffinity: 25n,
    affinityChange: 3n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },

  // === Ashwalker Ren (Charwood Copse) ===
  {
    npcName: 'Ashwalker Ren',
    optionKey: 'ren_root',
    parentOptionKey: null,
    playerText: '',
    npcResponse: 'My [research] focuses on the undead. The [dead] here are restless. [Sprites] are specimens.',
    requiredAffinity: 0n,
    affinityChange: 0n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Ashwalker Ren',
    optionKey: 'ren_research',
    parentOptionKey: 'ren_root',
    playerText: 'research',
    npcResponse: 'The Ashen Order studies the undead to understand the Ashfall. Knowledge is survival.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: 'Assist my research efforts.',
    isAffinityLocked: false,
  },
  {
    npcName: 'Ashwalker Ren',
    optionKey: 'ren_dead',
    parentOptionKey: 'ren_root',
    playerText: 'dead',
    npcResponse: 'The petrified trees are infused with necromantic energy. The dead do not rest here.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 2n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Ashwalker Ren',
    optionKey: 'ren_sprites',
    parentOptionKey: 'ren_root',
    playerText: 'sprites',
    npcResponse: 'I need Thorn Sprite specimens for my research. Bring me samples.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 3n,
    questTemplateName: 'Sprite Specimens',
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Ashwalker Ren',
    optionKey: 'ren_order',
    parentOptionKey: null,
    playerText: 'order',
    npcResponse: 'The Ashen Order archives the history the world forgot. We preserve what others would burn.',
    requiredAffinity: 25n,
    affinityChange: 3n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },

  // === Exile Voss (Brimstone Gulch) ===
  {
    npcName: 'Exile Voss',
    optionKey: 'voss_root',
    parentOptionKey: null,
    playerText: '',
    npcResponse: 'The [gulch] is mine. Ask about my [past] if you dare. Or discuss the [beasts].',
    requiredAffinity: 0n,
    affinityChange: 0n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Exile Voss',
    optionKey: 'voss_gulch',
    parentOptionKey: 'voss_root',
    playerText: 'gulch',
    npcResponse: 'Brimstone Gulch is sulfur and stone. It suits me fine. No one bothers me here.',
    requiredAffinity: 0n,
    affinityChange: 1n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: 'Earn my trust before prying.',
    isAffinityLocked: false,
  },
  {
    npcName: 'Exile Voss',
    optionKey: 'voss_past_locked',
    parentOptionKey: 'voss_root',
    playerText: 'past',
    npcResponse: '',
    requiredAffinity: 25n,
    affinityChange: 0n,
    sortOrder: 2n,
    questTemplateName: null,
    affinityHint: 'Buy me a drink first.',
    isAffinityLocked: true,
  },
  {
    npcName: 'Exile Voss',
    optionKey: 'voss_past_unlocked',
    parentOptionKey: null,
    playerText: 'past',
    npcResponse: 'I was Iron Compact. Made a mistake. Lost my rank. Now I am here.',
    requiredAffinity: 25n,
    affinityChange: 4n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Exile Voss',
    optionKey: 'voss_beasts',
    parentOptionKey: 'voss_root',
    playerText: 'beasts',
    npcResponse: 'Ashen Rams and Emberhawks hunt these passes. Dangerous if you are not careful.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 3n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },

  // === Torchbearer Isa (Gloomspire Landing) ===
  {
    npcName: 'Torchbearer Isa',
    optionKey: 'isa_root',
    parentOptionKey: null,
    playerText: '',
    npcResponse: 'The [deep] waits ahead. [Revenants] stalk the halls. [Sentinels] guard the vaults.',
    requiredAffinity: 0n,
    affinityChange: 0n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Torchbearer Isa',
    optionKey: 'isa_deep',
    parentOptionKey: 'isa_root',
    playerText: 'deep',
    npcResponse: 'Beyond this landing lies the true Embermarch Depths. Only the prepared survive.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: 'Prove your worth in battle.',
    isAffinityLocked: false,
  },
  {
    npcName: 'Torchbearer Isa',
    optionKey: 'isa_revenants',
    parentOptionKey: 'isa_root',
    playerText: 'revenants',
    npcResponse: 'Ashforged Revenants are the vault\'s guardians. Hunt them and make the deep safer.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 2n,
    questTemplateName: 'Revenant Scourge',
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Torchbearer Isa',
    optionKey: 'isa_sentinels',
    parentOptionKey: 'isa_root',
    playerText: 'sentinels',
    npcResponse: 'Vault Sentinels block the passages deeper in. Clear them out.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 3n,
    questTemplateName: 'Vault Clearing',
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Torchbearer Isa',
    optionKey: 'isa_torch',
    parentOptionKey: null,
    playerText: 'torch',
    npcResponse: 'I carry the torch because someone must. The dark claims those who let their light die.',
    requiredAffinity: 25n,
    affinityChange: 3n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },

  // === Keeper Mordane (Sootveil Hall) ===
  {
    npcName: 'Keeper Mordane',
    optionKey: 'mordane_root',
    parentOptionKey: null,
    playerText: '',
    npcResponse: 'These [halls] hold secrets. [Mystics] guard them. The [history] is written in ash.',
    requiredAffinity: 0n,
    affinityChange: 0n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Keeper Mordane',
    optionKey: 'mordane_halls',
    parentOptionKey: 'mordane_root',
    playerText: 'halls',
    npcResponse: 'Sootveil Hall is older than the Ashfall. It has seen empires rise and fall.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: 'Help preserve the vault\'s knowledge.',
    isAffinityLocked: false,
  },
  {
    npcName: 'Keeper Mordane',
    optionKey: 'mordane_mystics',
    parentOptionKey: 'mordane_root',
    playerText: 'mystics',
    npcResponse: 'Sootbound Mystics have corrupted the halls. Suppress them so I can continue my work.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 2n,
    questTemplateName: 'Mystic Suppression',
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Keeper Mordane',
    optionKey: 'mordane_history',
    parentOptionKey: 'mordane_root',
    playerText: 'history',
    npcResponse: 'The Embermarch Depths were forges before they were tombs. The fire never truly dies here.',
    requiredAffinity: 0n,
    affinityChange: 2n,
    sortOrder: 3n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },
  {
    npcName: 'Keeper Mordane',
    optionKey: 'mordane_ashwarden',
    parentOptionKey: null,
    playerText: 'ashwarden',
    npcResponse: 'The Ashwarden Throne at the heart of the vault. Empty now. But something stirs.',
    requiredAffinity: 50n,
    affinityChange: 5n,
    sortOrder: 1n,
    questTemplateName: null,
    affinityHint: null,
    isAffinityLocked: false,
  },

  // === Phase 6: New Quest Dialogue Branches ===

  // Marla the Guide — "Old Debts" (delivery) — Acquaintance gate (25)
  {
    npcName: 'Marla the Guide',
    optionKey: 'marla_old_debts',
    parentOptionKey: null,
    playerText: 'debts',
    npcResponse: 'I owe Scout Thessa an explanation. Would you carry a sealed letter to her in the Fringe? She is stationed near the Embermarch Gate.',
    requiredAffinity: 25n,
    affinityChange: 5n,
    sortOrder: 5n,
    questTemplateName: 'Old Debts',
    affinityHint: 'Build trust with Marla to learn about her past.',
    isAffinityLocked: true,
  },

  // Warden Kael — "Stolen Supply Cache" (kill_loot) — Acquaintance gate (25)
  {
    npcName: 'Warden Kael',
    optionKey: 'kael_supply_cache',
    parentOptionKey: null,
    playerText: 'supplies',
    npcResponse: 'The wolves have been raiding our supply caches. Kill wolves until you recover our stolen pack. It should still be intact.',
    requiredAffinity: 25n,
    affinityChange: 3n,
    sortOrder: 5n,
    questTemplateName: 'Stolen Supply Cache',
    affinityHint: 'Help Warden Kael with wolf patrols first.',
    isAffinityLocked: true,
  },

  // Warden Kael — "The Ranger's Cache" (explore) — Friend gate (50)
  {
    npcName: 'Warden Kael',
    optionKey: 'kael_rangers_cache',
    parentOptionKey: null,
    playerText: 'cache',
    npcResponse: 'Years ago, I buried emergency supplies in the Bramble Hollow. Search the area carefully — it should still be there.',
    requiredAffinity: 50n,
    affinityChange: 5n,
    sortOrder: 6n,
    questTemplateName: "The Ranger's Cache",
    affinityHint: 'Prove yourself a trusted ally to Warden Kael.',
    isAffinityLocked: true,
  },

  // Herbalist Venna — "Bogfen Healing Moss" (explore) — Acquaintance gate (25)
  {
    npcName: 'Herbalist Venna',
    optionKey: 'venna_healing_moss',
    parentOptionKey: null,
    playerText: 'moss',
    npcResponse: 'A rare healing moss grows deep in Willowfen, but it is hard to spot. Search the marsh carefully and you may find some.',
    requiredAffinity: 25n,
    affinityChange: 3n,
    sortOrder: 5n,
    questTemplateName: 'Bogfen Healing Moss',
    affinityHint: 'Help Herbalist Venna with her research first.',
    isAffinityLocked: true,
  },

  // Herbalist Venna — "Croaker Bile Glands" (kill_loot) — Friend gate (50)
  {
    npcName: 'Herbalist Venna',
    optionKey: 'venna_bile_glands',
    parentOptionKey: null,
    playerText: 'glands',
    npcResponse: 'I need a specific organ from the marsh croakers — a fresh bile gland. Not all of them carry one, so you may need to slay several.',
    requiredAffinity: 50n,
    affinityChange: 5n,
    sortOrder: 6n,
    questTemplateName: 'Croaker Bile Glands',
    affinityHint: 'Deepen your friendship with Herbalist Venna.',
    isAffinityLocked: true,
  },

  // Scout Thessa — "Enemy Scouting Reports" (explore) — Acquaintance gate (25)
  {
    npcName: 'Scout Thessa',
    optionKey: 'thessa_scouting_reports',
    parentOptionKey: null,
    playerText: 'scouting',
    npcResponse: 'Since you know Marla... I could use someone to search the Cinderwatch outpost for scouting reports left behind. Be careful — the area is hostile.',
    requiredAffinity: 25n,
    affinityChange: 5n,
    sortOrder: 5n,
    questTemplateName: 'Enemy Scouting Reports',
    affinityHint: "Deliver Marla's letter to Scout Thessa first.",
    isAffinityLocked: true,
  },

  // Scout Thessa — "The Iron Compact Leak" (delivery) — Friend gate (50)
  {
    npcName: 'Scout Thessa',
    optionKey: 'thessa_iron_compact_leak',
    parentOptionKey: null,
    playerText: 'leak',
    npcResponse: 'There is a leak in the Iron Compact supply chain. Take this evidence to Keeper Mordane in Sootveil Hall. He will know what to do.',
    requiredAffinity: 50n,
    affinityChange: 5n,
    sortOrder: 6n,
    questTemplateName: 'The Iron Compact Leak',
    affinityHint: 'Build a strong friendship with Scout Thessa.',
    isAffinityLocked: true,
  },

  // Ashwalker Ren — "Encryption Key" (kill_loot) — Acquaintance gate (25)
  {
    npcName: 'Ashwalker Ren',
    optionKey: 'ren_encryption_key',
    parentOptionKey: null,
    playerText: 'cipher',
    npcResponse: 'The Cinder Sentinels guard cipher key fragments. Destroy them and bring me any fragments you find. The drop rate is low, so be persistent.',
    requiredAffinity: 25n,
    affinityChange: 3n,
    sortOrder: 5n,
    questTemplateName: 'Encryption Key',
    affinityHint: "Earn Ashwalker Ren's trust first.",
    isAffinityLocked: true,
  },

  // Ashwalker Ren — "The Ashforged Commander" (boss_kill) — Friend gate (50)
  {
    npcName: 'Ashwalker Ren',
    optionKey: 'ren_ashforged_commander',
    parentOptionKey: null,
    playerText: 'commander',
    npcResponse: 'An Ashforged Commander has been spotted near the Scoria Flats. Search the area and engage it if you can. It will not go down easily.',
    requiredAffinity: 50n,
    affinityChange: 5n,
    sortOrder: 6n,
    questTemplateName: 'The Ashforged Commander',
    affinityHint: 'Become a close ally of Ashwalker Ren.',
    isAffinityLocked: true,
  },

  // Torchbearer Isa — "The Revenant Lord" (boss_kill) — Acquaintance gate (25)
  {
    npcName: 'Torchbearer Isa',
    optionKey: 'isa_revenant_lord',
    parentOptionKey: null,
    playerText: 'lord',
    npcResponse: 'A revenant lord haunts the Furnace Crypt. Search the depths for it. It only appears to those who look carefully.',
    requiredAffinity: 25n,
    affinityChange: 3n,
    sortOrder: 5n,
    questTemplateName: 'The Revenant Lord',
    affinityHint: 'Prove your mettle to Torchbearer Isa.',
    isAffinityLocked: true,
  },

  // Torchbearer Isa — "The Binding Seal" (explore) — Friend gate (50)
  {
    npcName: 'Torchbearer Isa',
    optionKey: 'isa_binding_seal',
    parentOptionKey: null,
    playerText: 'seal',
    npcResponse: 'Deep in the Embervault Sanctum lies an ancient binding seal. Search for it — but be warned, disturbing it may attract attention.',
    requiredAffinity: 50n,
    affinityChange: 5n,
    sortOrder: 6n,
    questTemplateName: 'The Binding Seal',
    affinityHint: 'Build a strong bond with Torchbearer Isa.',
    isAffinityLocked: true,
  },

  // Keeper Mordane — "The Keeper's Ledger" (explore) — Acquaintance gate (25)
  {
    npcName: 'Keeper Mordane',
    optionKey: 'mordane_keepers_ledger',
    parentOptionKey: null,
    playerText: 'ledger',
    npcResponse: "Since Scout Thessa trusts you with sensitive matters... There is a ledger hidden in the Bonecinder Gallery. Search for it. The vault's secrets must be preserved.",
    requiredAffinity: 25n,
    affinityChange: 5n,
    sortOrder: 5n,
    questTemplateName: "The Keeper's Ledger",
    affinityHint: "Deliver Thessa's evidence to Keeper Mordane first.",
    isAffinityLocked: true,
  },

  // Keeper Mordane — "The Vault Warden" (boss_kill) — Friend gate (50)
  {
    npcName: 'Keeper Mordane',
    optionKey: 'mordane_vault_warden',
    parentOptionKey: null,
    playerText: 'warden',
    npcResponse: 'A Vault Warden patrols The Crucible. It guards the deepest secrets. Search for it and put it down before it finds us.',
    requiredAffinity: 50n,
    affinityChange: 5n,
    sortOrder: 6n,
    questTemplateName: 'The Vault Warden',
    affinityHint: 'Become a trusted friend of Keeper Mordane.',
    isAffinityLocked: true,
  },
];
