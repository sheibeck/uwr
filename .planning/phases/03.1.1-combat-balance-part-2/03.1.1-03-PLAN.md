---
phase: 03.1.1-combat-balance-part-2
plan: 03
type: execute
wave: 3
depends_on: ["03.1.1-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All DoT/HoT/debuff/AoE scenarios verified by human testing"
    - "Power budget splits work correctly across all ability types"
    - "Effect stacking and refresh logic confirmed working"
    - "No critical bugs or balance issues identified"
  artifacts: []
  key_links: []
---

<objective>
Comprehensive human verification and acceptance testing of DoT/HoT/debuff/AoE balance implementation. Test edge cases, balance across classes, and multi-target scenarios to ensure combat balance goals are met.

Purpose: Final validation that Phase 3.1.1 goals are achieved before marking phase complete.

Output: Human acceptance sign-off on DoT/HoT/debuff/AoE balance system.
</objective>

<execution_context>
@C:/Users/Dell/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Dell/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@C:/projects/uwr/.planning/PROJECT.md
@C:/projects/uwr/.planning/ROADMAP.md
@C:/projects/uwr/.planning/STATE.md
@C:/projects/uwr/.planning/phases/03.1.1-combat-balance-part-2/03.1.1-CONTEXT.md
@C:/projects/uwr/.planning/phases/03.1.1-combat-balance-part-2/03.1.1-RESEARCH.md
@C:/projects/uwr/.planning/phases/03.1.1-combat-balance-part-2/03.1.1-01-SUMMARY.md
@C:/projects/uwr/.planning/phases/03.1.1-combat-balance-part-2/03.1.1-02-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete DoT/HoT/debuff/AoE balance system for combat. Power budget split implementation, reduced stat scaling for periodic effects, fixed debuff magnitudes, AoE target enumeration with damage reduction, and effect stacking/refresh logic.
  </what-built>
  <how-to-verify>
**Comprehensive Test Suite:**

**Category 1: DoT Damage Balance**
1. Test Shadow Cut (STR-based DoT):
   - Rogue with 20 STR vs Rogue with 40 STR
   - Verify DoT damage scales with STR but at reduced rate (50%)
   - Compare total damage (direct + DoT) to pure direct-damage abilities of same power
   - Confirm total damage is similar (power budget split, not bonus damage)

2. Test Plague Spark (INT-based DoT):
   - Wizard with different INT values
   - Verify DoT scales with INT (different stat than Shadow Cut)
   - Verify hybrid formula works for magic DoTs

3. Test DoT-heavy ability (Bleed with 60% DoT split):
   - Compare burst damage to Shadow Cut (40% DoT split)
   - Verify Bleed deals less direct damage but more DoT total
   - Confirm same total damage over full duration

**Category 2: HoT Healing Balance**
1. Test Spirit Mender (WIS-based HoT):
   - Shaman with 15 WIS vs Shaman with 30 WIS
   - Verify HoT healing scales with WIS at reduced rate
   - Compare total healing to pure direct-heal abilities
   - Confirm WIS scaling only applies to healing classes (not warriors)

2. Test Nature's Gift (HoT-heavy with 60% HoT split):
   - Compare immediate heal to Spirit Mender (50% split)
   - Verify more healing comes from HoT ticks
   - Confirm same total healing over full duration

**Category 3: Debuff Power Cost**
1. Test Hex (AC reduction debuff):
   - Note damage dealt by Hex
   - Compare to Mind Fray (same power, no debuff)
   - Verify Hex deals ~25% less damage
   - Verify AC debuff is -2 (fixed) regardless of caster's stats
   - Test with high-INT Enchanter and low-INT Enchanter — debuff magnitude should be identical

2. Test Slow (slow debuff):
   - Verify damage reduction is ~25% (same as Hex)
   - Confirm debuff magnitude is fixed
   - Verify debuff lasts for specified duration (3 ticks)

**Category 4: AoE Balance**
1. Test Warrior Cleave (AoE damage):
   - Combat with 1 enemy: note damage
   - Combat with 3 enemies: note damage per enemy
   - Verify damage per enemy is ~65% of single-target damage
   - Verify all enemies take damage (no target cap)
   - Calculate total damage dealt: should be ~195% of single-target (65% × 3)

2. Test Paladin Devotion (AoE buff):
   - Group with 4 party members
   - Use Devotion
   - Verify all party members receive buff
   - Verify buff magnitude is consistent (not reduced per target)

**Category 5: Effect Stacking & Refresh**
1. Test same-ability refresh:
   - Apply Shadow Cut DoT to enemy
   - Wait 1 tick (3 seconds)
   - Apply Shadow Cut again
   - Verify duration resets to 2 ticks (not extended to 3 ticks)
   - Verify DoT damage doesn't stack (still ~5 per tick, not ~10)

2. Test different-ability stacking:
   - Apply Shadow Cut DoT to enemy
   - Apply Plague Spark DoT to same enemy
   - Wait for tick
   - Verify both DoTs tick simultaneously
   - Verify total damage per tick = sum of both DoTs

3. Test multi-caster stacking:
   - Player A applies Shadow Cut to enemy
   - Player B applies Shadow Cut to same enemy
   - Verify both DoTs run simultaneously (different source abilities)
   - Verify both DoTs refresh independently

4. Test debuff stacking:
   - Apply Hex (-2 AC) to enemy
   - Apply another AC reduction debuff
   - Verify total AC reduction is additive (-2 + -3 = -5)

**Category 6: Edge Cases**
1. Test DoT on enemy that dies before all ticks:
   - Apply Shadow Cut DoT
   - Kill enemy after 1 tick
   - Verify DoT effect is cleaned up (doesn't persist on dead enemy)

2. Test HoT on character at max HP:
   - Apply Spirit Mender HoT to character at 100% HP
   - Verify HoT ticks don't overheal (HP stays at max)

3. Test AoE with mixed target HPs:
   - Combat with 3 enemies: one at 10% HP, two at 100% HP
   - Use Warrior Cleave
   - Verify low-HP enemy dies, others take damage
   - Verify damage calculation is correct for all targets

4. Test power budget split edge case (100% DoT):
   - If any ability has 100% DoT split (0% direct damage)
   - Verify direct damage is 0 or minimal
   - Verify all power goes to DoT

**Category 7: Class Balance Spot Checks**
1. Test melee DoT class (Rogue):
   - Compare total DPS (direct + DoT) to pure melee (Warrior)
   - Verify Rogue competitive but not overpowered

2. Test caster DoT class (Necromancer):
   - Compare total DPS to pure caster (Wizard)
   - Verify DoT-heavy playstyle viable

3. Test healing class HoT (Shaman/Druid):
   - Compare total healing to pure direct healer (Cleric)
   - Verify HoT-heavy healers competitive

4. Test debuff utility class (Enchanter):
   - Verify damage reduction from debuff cost is noticeable but not crippling
   - Confirm debuffs provide tactical value (reduced enemy AC helps party)

**Success Criteria:**
- [ ] All DoT abilities deal split damage correctly (direct + periodic)
- [ ] DoT damage scales with correct stat at reduced rate (50%)
- [ ] All HoT abilities heal with split (direct + periodic)
- [ ] HoT healing scales with WIS at reduced rate
- [ ] Debuff abilities deal 25% reduced damage
- [ ] Debuff magnitudes are fixed (not scaled by caster stats)
- [ ] AoE abilities hit all targets at 65% damage per target
- [ ] Same-ability DoT/HoT refreshes duration (doesn't stack)
- [ ] Different-ability DoT/HoT stacks correctly
- [ ] Multi-caster effects stack correctly
- [ ] DoT/HoT tick every 3 seconds reliably
- [ ] No edge case crashes or errors
- [ ] Class balance feels appropriate (no class dominates)
  </how-to-verify>
  <resume-signal>
Type "approved" if all test categories pass and balance feels appropriate, or describe issues (e.g., "DoT damage too low for rogues", "AoE too powerful in multi-enemy fights", "debuffs not impactful enough").
  </resume-signal>
</task>

</tasks>

<verification>
After human approval:

1. **All test categories passed:**
   - DoT damage balance verified
   - HoT healing balance verified
   - Debuff power cost verified
   - AoE balance verified
   - Effect stacking/refresh verified
   - Edge cases handled
   - Class balance appropriate

2. **Phase 3.1.1 goals met:**
   - DoT/HoT scale with same stat as direct damage
   - Reduced scaling rate prevents double-dipping
   - Power budget split approach works
   - Debuffs have fixed magnitude and cost power
   - AoE abilities balanced with per-target reduction
   - Effect stacking follows user decisions

3. **No critical issues:**
   - No crashes or errors
   - Combat feels balanced
   - All ability types viable
</verification>

<success_criteria>
- [ ] Human tester approves all 7 test category results
- [ ] DoT/HoT power budget splits verified across multiple abilities
- [ ] Stat scaling correctness verified (right stat, reduced rate)
- [ ] Debuff power cost verified (damage reduction + fixed magnitude)
- [ ] AoE enumeration and damage reduction verified
- [ ] Effect stacking/refresh logic verified (same-source refresh, different-source stack)
- [ ] No critical bugs identified
- [ ] Class balance acceptable across melee, caster, healer, utility classes
- [ ] Phase 3.1.1 marked complete in STATE.md
</success_criteria>

<output>
After completion, create `.planning/phases/03.1.1-combat-balance-part-2/03.1.1-03-SUMMARY.md` and update STATE.md to mark Phase 3.1.1 complete.
</output>
